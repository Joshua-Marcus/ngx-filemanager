export const isJsons = (array) => Array.isArray(array) &&
    array.every(row => typeof row === 'object' && !(row instanceof Array));
export const isArrays = (array) => Array.isArray(array) && array.every(row => Array.isArray(row));
export function jsonsHeaders(array) {
    return Array.from(new Set(array.map(item => Object.keys(item)).reduce((a, b) => [...a, ...b], [])));
}
export function jsons2arrays(jsons, headers) {
    headers = headers || jsonsHeaders(jsons);
    // allow headers to have custom labels, defaulting to having the header data key be the label
    let headerLabels = headers;
    let headerKeys = headers;
    if (isJsons(headers)) {
        headerLabels = headers.map(header => header.label);
        headerKeys = headers.map(header => header.key);
    }
    const data = jsons.map(object => headerKeys.map(header => (header in object ? object[header] : '')));
    return [headerLabels, ...data];
}
export const elementOrEmpty = (element) => element || element === 0 ? element : '';
export function joiner(data, delimiter = ',') {
    return data
        .map((row, index) => row.map((element) => '"' + elementOrEmpty(element) + '"').join(delimiter))
        .join(`\n`);
}
export function arrays2csv(data, headers, delimiter) {
    return joiner(headers ? [headers, ...data] : data, delimiter);
}
export function jsons2csv(data, headers, delimiter) {
    return joiner(jsons2arrays(data, headers), delimiter);
}
export function string2csv(data, headers, delimiter) {
    return headers ? `${headers.join(delimiter)}\n${data}` : data;
}
export function toCSV(data, headers, delimiter) {
    if (isJsons(data)) {
        return jsons2csv(data, headers, delimiter);
    }
    if (isArrays(data)) {
        return arrays2csv(data, headers, delimiter);
    }
    if (typeof data === 'string') {
        return string2csv(data, headers, delimiter);
    }
    throw new TypeError(`Data should be a "String", "Array of arrays" OR "Array of objects" `);
}
export function buildURI(data, uFEFF = true, headers, delimiter) {
    const csv = toCSV(data, headers, delimiter);
    const blob = new Blob([uFEFF ? '\uFEFF' : '', csv], { type: 'text/csv' });
    return URL.createObjectURL(blob);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjdHJsL25neC1jc3YvIiwic291cmNlcyI6WyJ1dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBLE1BQU0sQ0FBQyxNQUFNLE9BQU8sR0FBRyxDQUFDLEtBQVksRUFBRSxFQUFFLENBQ3RDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO0lBQ3BCLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEdBQUcsS0FBSyxRQUFRLElBQUksQ0FBQyxDQUFDLEdBQUcsWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBRXpFLE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxDQUFDLEtBQVksRUFBRSxFQUFFLENBQ3ZDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUVqRSxNQUFNLFVBQVUsWUFBWSxDQUFDLEtBQWU7SUFDMUMsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUNmLElBQUksR0FBRyxDQUNMLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUN4RSxDQUNGLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxVQUFVLFlBQVksQ0FDMUIsS0FBa0MsRUFDbEMsT0FBZ0M7SUFFaEMsT0FBTyxHQUFHLE9BQU8sSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFekMsNkZBQTZGO0lBQzdGLElBQUksWUFBWSxHQUFhLE9BQW1CLENBQUM7SUFD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LFFBQVEsQ0FDdEIsSUFBK0QsRUFDL0QsS0FBSyxHQUFHLElBQUksRUFDWixPQUFnQyxFQUNoQyxTQUFrQjtJQUVsQixNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztJQUMxRSxPQUFPLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgSGVhZGVyT2JqIHtcbiAgbGFiZWw6IHN0cmluZztcbiAga2V5OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBpc0pzb25zID0gKGFycmF5OiBhbnlbXSkgPT5cbiAgQXJyYXkuaXNBcnJheShhcnJheSkgJiZcbiAgYXJyYXkuZXZlcnkocm93ID0+IHR5cGVvZiByb3cgPT09ICdvYmplY3QnICYmICEocm93IGluc3RhbmNlb2YgQXJyYXkpKTtcblxuZXhwb3J0IGNvbnN0IGlzQXJyYXlzID0gKGFycmF5OiBhbnlbXSkgPT5cbiAgQXJyYXkuaXNBcnJheShhcnJheSkgJiYgYXJyYXkuZXZlcnkocm93ID0+IEFycmF5LmlzQXJyYXkocm93KSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBqc29uc0hlYWRlcnMoYXJyYXk6IG9iamVjdFtdKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKFxuICAgIG5ldyBTZXQoXG4gICAgICBhcnJheS5tYXAoaXRlbSA9PiBPYmplY3Qua2V5cyhpdGVtKSkucmVkdWNlKChhLCBiKSA9PiBbLi4uYSwgLi4uYl0sIFtdKSxcbiAgICApLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24ganNvbnMyYXJyYXlzKFxuICBqc29uczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVtdLFxuICBoZWFkZXJzPzogc3RyaW5nW10gfCBIZWFkZXJPYmpbXSxcbikge1xuICBoZWFkZXJzID0gaGVhZGVycyB8fCBqc29uc0hlYWRlcnMoanNvbnMpO1xuXG4gIC8vIGFsbG93IGhlYWRlcnMgdG8gaGF2ZSBjdXN0b20gbGFiZWxzLCBkZWZhdWx0aW5nIHRvIGhhdmluZyB0aGUgaGVhZGVyIGRhdGEga2V5IGJlIHRoZSBsYWJlbFxuICBsZXQgaGVhZGVyTGFiZWxzOiBzdHJpbmdbXSA9IGhlYWRlcnMgYXMgc3RyaW5nW107XG4gIGxldCBoZWFkZXJLZXlzOiBzdHJpbmdbXSA9IGhlYWRlcnMgYXMgc3RyaW5nW107XG4gIGlmIChpc0pzb25zKGhlYWRlcnMpKSB7XG4gICAgaGVhZGVyTGFiZWxzID0gKGhlYWRlcnMgYXMgSGVhZGVyT2JqW10pLm1hcChoZWFkZXIgPT4gaGVhZGVyLmxhYmVsKTtcbiAgICBoZWFkZXJLZXlzID0gKGhlYWRlcnMgYXMgSGVhZGVyT2JqW10pLm1hcChoZWFkZXIgPT4gaGVhZGVyLmtleSk7XG4gIH1cblxuICBjb25zdCBkYXRhID0ganNvbnMubWFwKG9iamVjdCA9PlxuICAgIGhlYWRlcktleXMubWFwKGhlYWRlciA9PiAoaGVhZGVyIGluIG9iamVjdCA/IG9iamVjdFtoZWFkZXJdIDogJycpKSxcbiAgKTtcbiAgcmV0dXJuIFtoZWFkZXJMYWJlbHMsIC4uLmRhdGFdO1xufVxuXG5leHBvcnQgY29uc3QgZWxlbWVudE9yRW1wdHkgPSAoZWxlbWVudDogYW55KSA9PlxuICBlbGVtZW50IHx8IGVsZW1lbnQgPT09IDAgPyBlbGVtZW50IDogJyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBqb2luZXIoZGF0YTogYW55LCBkZWxpbWl0ZXIgPSAnLCcpIHtcbiAgcmV0dXJuIGRhdGFcbiAgICAubWFwKChyb3c6IGFueSwgaW5kZXg6IG51bWJlcikgPT5cbiAgICAgIHJvdy5tYXAoKGVsZW1lbnQ6IGFueSkgPT4gJ1wiJyArIGVsZW1lbnRPckVtcHR5KGVsZW1lbnQpICsgJ1wiJykuam9pbihkZWxpbWl0ZXIpLFxuICAgIClcbiAgICAuam9pbihgXFxuYCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheXMyY3N2KFxuICBkYXRhOiBzdHJpbmdbXVtdLFxuICBoZWFkZXJzPzogc3RyaW5nW10gfCBIZWFkZXJPYmpbXSxcbiAgZGVsaW1pdGVyPzogc3RyaW5nLFxuKSB7XG4gIHJldHVybiBqb2luZXIoaGVhZGVycyA/IFtoZWFkZXJzLCAuLi5kYXRhXSA6IGRhdGEsIGRlbGltaXRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBqc29uczJjc3YoXG4gIGRhdGE6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1bXSxcbiAgaGVhZGVycz86IHN0cmluZ1tdIHwgSGVhZGVyT2JqW10sXG4gIGRlbGltaXRlcj86IHN0cmluZyxcbikge1xuICByZXR1cm4gam9pbmVyKGpzb25zMmFycmF5cyhkYXRhLCBoZWFkZXJzKSwgZGVsaW1pdGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZzJjc3YoXG4gIGRhdGE6IHN0cmluZyxcbiAgaGVhZGVycz86IHN0cmluZ1tdLFxuICBkZWxpbWl0ZXI/OiBzdHJpbmcsXG4pIHtcbiAgcmV0dXJuIGhlYWRlcnMgPyBgJHtoZWFkZXJzLmpvaW4oZGVsaW1pdGVyKX1cXG4ke2RhdGF9YCA6IGRhdGE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0NTVihcbiAgZGF0YTogc3RyaW5nIHwgc3RyaW5nW11bXSB8IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1bXSB8IGFueVtdLFxuICBoZWFkZXJzPzogc3RyaW5nW10gfCBIZWFkZXJPYmpbXSxcbiAgZGVsaW1pdGVyPzogc3RyaW5nLFxuKSB7XG4gIGlmIChpc0pzb25zKGRhdGEgYXMgYW55KSkge1xuICAgIHJldHVybiBqc29uczJjc3YoZGF0YSBhcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9W10sIGhlYWRlcnMsIGRlbGltaXRlcik7XG4gIH1cbiAgaWYgKGlzQXJyYXlzKGRhdGEgYXMgYW55KSkge1xuICAgIHJldHVybiBhcnJheXMyY3N2KGRhdGEgYXMgc3RyaW5nW11bXSwgaGVhZGVycywgZGVsaW1pdGVyKTtcbiAgfVxuICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHN0cmluZzJjc3YoZGF0YSwgaGVhZGVycyBhcyBzdHJpbmdbXSwgZGVsaW1pdGVyKTtcbiAgfVxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgIGBEYXRhIHNob3VsZCBiZSBhIFwiU3RyaW5nXCIsIFwiQXJyYXkgb2YgYXJyYXlzXCIgT1IgXCJBcnJheSBvZiBvYmplY3RzXCIgYCxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkVVJJKFxuICBkYXRhOiBzdHJpbmcgfCBzdHJpbmdbXVtdIHwgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVtdIHwgYW55W10sXG4gIHVGRUZGID0gdHJ1ZSxcbiAgaGVhZGVycz86IHN0cmluZ1tdIHwgSGVhZGVyT2JqW10sXG4gIGRlbGltaXRlcj86IHN0cmluZyxcbikge1xuICBjb25zdCBjc3YgPSB0b0NTVihkYXRhLCBoZWFkZXJzLCBkZWxpbWl0ZXIpO1xuICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3VGRUZGID8gJ1xcdUZFRkYnIDogJycsIGNzdl0sIHsgdHlwZTogJ3RleHQvY3N2JyB9KTtcbiAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG59XG4iXX0=